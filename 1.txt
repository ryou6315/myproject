import requests

# === 1ï¸âƒ£ Okta åŸŸå ===
OKTA_DOMAIN = "https://dev-123456.okta.com"  # â† æ”¹æˆä½ çš„ Okta åŸŸå

# === 2ï¸âƒ£ ç”¨æˆ·åˆ—è¡¨ ===
users = [
    {"username": "user1@example.com", "password": "Password123!"},
    {"username": "user2@example.com", "password": "Password456!"},
    {"username": "user3@example.com", "password": "Password789!"},
]

# === 3ï¸âƒ£ ç™»å½•å‡½æ•° ===
def login_user(username, password):
    url = f"{OKTA_DOMAIN}/api/v1/authn"
    payload = {
        "username": username,
        "password": password
    }

    try:
        response = requests.post(url, json=payload, headers={"Accept": "application/json"})
        if response.status_code == 200:
            data = response.json()
            if data.get("status") == "SUCCESS":
                token = data.get("sessionToken")
                print(f"âœ… ç™»å½•æˆåŠŸ: {username}")
                print(f"   sessionToken: {token}\n")
                return token
            else:
                print(f"âš ï¸ ç™»å½•çŠ¶æ€: {data.get('status')} (ç”¨æˆ·: {username})")
        else:
            print(f"âŒ ç™»å½•å¤±è´¥ ({username}) - HTTP {response.status_code}")
            print(response.text)
    except Exception as e:
        print(f"ğŸš¨ ç™»å½•æ—¶å‡ºé”™ ({username}): {e}")

# === 4ï¸âƒ£ ä¾æ¬¡ç™»å½•æ¯ä¸ªç”¨æˆ· ===
for user in users:
    login_user(user["username"], user["password"])
