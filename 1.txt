import os
import shutil

# ファイルパスを定義
source_file = "copy.json"  # コピー元のファイル
txt_file = "file_list.txt"  # ファイル名リストが書かれたtxtファイル
output_dir = "output_files"  # コピー後の出力フォルダ

# 出力用ディレクトリが存在しない場合は作成
os.makedirs(output_dir, exist_ok=True)

# コピー元ファイルが存在するかどうかを確認
if not os.path.exists(source_file):
    print(f"源ファイル {source_file} が存在しません。パスを確認してください！")
    exit(1)

# ファイル名リストが存在するかを確認
if not os.path.exists(txt_file):
    print(f"ファイル名リスト {txt_file} が存在しません。パスを確認してください！")
    exit(1)

# ファイル名リストを読み込み
with open(txt_file, "r", encoding="utf-8") as f:
    file_names = [line.strip() for line in f if line.strip()]

# ファイル名を過るって、コピーしてリネーム
for name in file_names:
    # 出力用のファイル名を定義
    main_file = os.path.join(output_dir, f"{name}_main.json")
    sub_file = os.path.join(output_dir, f"{name}_sub.json")

    # 源ファイルをコピーし、名前を変更
    shutil.copy(source_file, main_file)
    shutil.copy(source_file, sub_file)

    print(f"ファイル作成済み：{main_file} と {sub_file}")

print("すべてのファイルの処理が完了しました！")
