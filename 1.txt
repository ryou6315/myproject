ä¸€ã€ç”Ÿæˆç§é’¥ + è‡ªç­¾å CA æ ¹è¯ä¹¦

å…ˆç”Ÿæˆä¸€ä¸ªâ€œæ ¹è¯ä¹¦é¢å‘æœºæ„ (CA)â€ï¼Œä»¥åç”¨å®ƒæ¥ç­¾å‘æœåŠ¡ç«¯è¯ä¹¦ã€‚

# 1. ç”Ÿæˆ CA ç§é’¥
openssl genrsa -out ca.key 2048

# 2. ç”Ÿæˆ CA è‡ªç­¾åæ ¹è¯ä¹¦ (æœ‰æ•ˆæœŸ 10 å¹´)
openssl req -x509 -new -nodes -key ca.key -sha256 -days 3650 -out ca.crt \
  -subj "/C=JP/ST=Tokyo/L=Tokyo/O=MyCompany/OU=IT/CN=MyRootCA"


ä¼šå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼š

ca.key â†’ CA çš„ç§é’¥

ca.crt â†’ CA çš„æ ¹è¯ä¹¦

ğŸ“œ äºŒã€ç”ŸæˆæœåŠ¡ç«¯ç§é’¥ + è¯ä¹¦ç­¾åè¯·æ±‚ (CSR)

ç»™ä½ çš„ Apache æˆ– Java æœåŠ¡ç”Ÿæˆè¯ä¹¦ã€‚

# 1. ç”ŸæˆæœåŠ¡ç«¯ç§é’¥
openssl genrsa -out server.key 2048

# 2. ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)
openssl req -new -key server.key -out server.csr \
  -subj "/C=JP/ST=Tokyo/L=Tokyo/O=MyCompany/OU=IT/CN=localhost"


ä¼šå¾—åˆ°ï¼š

server.key â†’ æœåŠ¡ç«¯ç§é’¥

server.csr â†’ ç­‰å¾… CA ç­¾å‘çš„è¯ä¹¦è¯·æ±‚

âœ… ä¸‰ã€ç”¨ CA ç­¾å‘æœåŠ¡ç«¯è¯ä¹¦ (CRT)

ç”¨å‰é¢ç”Ÿæˆçš„ CA æ ¹è¯ä¹¦å»ç­¾å‘ï¼š

openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial \
  -out server.crt -days 365 -sha256


ç»“æœï¼š

server.crt â†’ æœåŠ¡ç«¯å…¬é’¥è¯ä¹¦

ca.crt â†’ æ ¹è¯ä¹¦ï¼ˆå®¢æˆ·ç«¯è¦å¯¼å…¥ï¼‰

server.key â†’ æœåŠ¡ç«¯ç§é’¥

ğŸ¯ å››ã€æ‰“åŒ…æˆ JKSï¼ˆå¦‚æœè¦ç»™ JMeter / Tomcat ç”¨ï¼‰

å…ˆæŠŠ æœåŠ¡ç«¯è¯ä¹¦ + ç§é’¥ åˆæˆ PKCS12 æ–‡ä»¶ï¼š

openssl pkcs12 -export -in server.crt -inkey server.key -out server.p12 \
  -name myserver -CAfile ca.crt -caname root


å†ç”¨ keytool è½¬æ¢æˆ JKSï¼š

keytool -importkeystore \
  -destkeystore keystore.jks \
  -srckeystore server.p12 \
  -srcstoretype PKCS12 \
  -alias myserver


ğŸ‘‰ è¿™æ ·ï¼Œä½ å°±å®Œæ•´åœ°ç”Ÿæˆäº†ï¼š

CA æ ¹è¯ä¹¦ï¼šca.crt

æœåŠ¡ç«¯è¯ä¹¦ï¼šserver.crt

æœåŠ¡ç«¯ç§é’¥ï¼šserver.key

æœ€ç»ˆ Java å¯ç”¨ï¼škeystore.jks

è¦ä¸è¦æˆ‘å¸®ä½ æ•´ç†ä¸€ä¸ª æœ€å°å¯æ‰§è¡Œè„šæœ¬ï¼ˆä¸€æ­¥æ­¥è·‘ä¸‹æ¥ï¼Œè‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰ key/crt/jksï¼‰ï¼Ÿè¿™æ ·ä½ åªéœ€è¦å¤åˆ¶ç²˜è´´å°±èƒ½å¾—åˆ°å®Œæ•´è¯ä¹¦é“¾ã€‚
