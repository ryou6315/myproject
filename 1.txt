import requests

# === 1️⃣ Okta 域名 ===
OKTA_DOMAIN = "https://dev-123456.okta.com"  # ← 改成你的 Okta 域名

# === 2️⃣ 用户列表 ===
users = [
    {"username": "user1@example.com", "password": "Password123!"},
    {"username": "user2@example.com", "password": "Password456!"},
    {"username": "user3@example.com", "password": "Password789!"},
]

# === 3️⃣ 登录函数 ===
def login_user(username, password):
    url = f"{OKTA_DOMAIN}/api/v1/authn"
    payload = {
        "username": username,
        "password": password
    }

    try:
        response = requests.post(url, json=payload, headers={"Accept": "application/json"})
        if response.status_code == 200:
            data = response.json()
            if data.get("status") == "SUCCESS":
                token = data.get("sessionToken")
                print(f"✅ 登录成功: {username}")
                print(f"   sessionToken: {token}\n")
                return token
            else:
                print(f"⚠️ 登录状态: {data.get('status')} (用户: {username})")
        else:
            print(f"❌ 登录失败 ({username}) - HTTP {response.status_code}")
            print(response.text)
    except Exception as e:
        print(f"🚨 登录时出错 ({username}): {e}")

# === 4️⃣ 依次登录每个用户 ===
for user in users:
    login_user(user["username"], user["password"])
