import requests

def check_proxy_used(target_url):
    try:
        response = requests.get(target_url, timeout=5)
        print("响应头：")
        for key, value in response.headers.items():
            print(f"{key}: {value}")
        if 'Via' in response.headers or 'X-Forwarded-For' in response.headers:
            print("✅ 检测到使用了代理")
        else:
            print("🚫 未检测到明显的代理")
    except Exception as e:
        print("请求失败：", e)

check_proxy_used("https://teams.microsoft.com")
